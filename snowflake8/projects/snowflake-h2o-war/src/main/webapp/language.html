<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<!--
/***********************************************************************
 * 
 * language.html
 * 
 * @Copyright (c) 2016 boluozhai.com
 * @License MIT License
 * @Author xukun<xukun17@sina.com>
 * 
 */
-->

<head>

<meta charset='utf-8' />
<title>Language</title>

<link href="./lib/import/bootstrap/css/bootstrap.min.css"
	rel="stylesheet" type="text/css" />

</head>
<body>

	<div class='container'>

		<!-- for debug -->

		<h1 class='i18n' i18n='language'>Language</h1>


		<div class="row">

			<div class="col-lg-6">
				<div class="input-group">
					<input type="text" class=" input-lang-name form-control"> <span
						class="input-group-btn">
						<button class="btn btn-default  i18n btn-setup " i18n='setup'
							type="button">设置</button>
					</span>
				</div>
			</div>

		</div>
	</div>

	<script src="./lib/import/jquery/jquery.min.js"></script>
	<script src="./lib/import/bootstrap/js/bootstrap.min.js"></script>

	<script src="./lib/import/snowflake/core.js"></script>
	<script src="./lib/import/snowflake/context.js"></script>

	<script src="./this.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {

			var input = $('.input-lang-name');
			input.val('zh_CN');

			$('.btn-setup').click(do_setup);

		});

		function do_setup() {

			var input = $('.input-lang-name');
			var lang = input.val();
			send(lang);

		}

		function send(lang) {
			var url = './i18n.js?service=active-www&language=' + lang;
			var xhr = new XMLHttpRequest();
			xhr.open('POST', url, true);
			xhr.onreadystatechange = function() {

				var state = xhr.readyState;
				if (state != 4) {
					return;
				}

				var status = xhr.status;
				if (status == 200) {
					alert('setup language as : ' + lang);
				} else {
					alert('Error: HTTP ' + status);
				}

			};
			xhr.send();
		}
	</script>

</body>
</html>