<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8' />


<style type="text/css">
.i18n-yyy {
	content: 'abcd';
}
</style>

</head>
<body>

	<div>
		<h1>Test JHR</h1>

		<div>
			<table class='table'>
				<tr class='th_row'>
					<th>code</th>
					<th>english</th>
					<th>chinese</th>
				</tr>
				<tr class='td_row'>
					<td class='code'></td>
					<td class='en'></td>
					<td class='zh'></td>
				</tr>
			</table>
		</div>

		<div>
			<ol>
				<li class='i18n i18n-xxx'></li>
				<li class='i18n i18n-yyy'></li>
				<li class='i18n i18n-zzz'></li>
			</ol>
		</div>

	</div>

	<script src="../../../jquery/1.11.2/src/jquery/jquery.min.js"></script>

	<script src="../../../snowjs/0.7/src/snowjs/Lang.js"></script>
	<script src="../../../snowjs/0.7/src/snowjs/Context.js"></script>
	<script src="../../../snowjs/0.7/src/snowjs/Base64.js"></script>
	<script src="../../../snowjs/0.7/src/snowjs/Web.js"></script>
	<script src="../../../snowjs/0.7/src/snowjs/I18n.js"></script>

	<script src="root.js"></script>
	<script src="index.js"></script>
	<script src="test-i18n.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {

			var context = Page.context();
			setup_table(context);

			var i18n = js.i18n.I18n;
			var locale = null; // 'en_US';
			System.out.println(locale);
			i18n.getManager().defaultLocale(locale);
			i18n.localize($('body'));

		});

		function setup_table(context) {

			var tab_h = $('.th_row');
			var tab_d = $('.td_row');
			var tab = tab_d.parent();
			tab.empty();
			tab.append(tab_h);

			var array = codes();
			for ( var i in array) {
				var code = array[i];
				var ch = context.getMessage(code, null, 'default', 'zh_CN');
				var en = context.getMessage(code, null, null, 'en_US');

				var row = tab_d.clone();
				row.find('.code').text(code);
				row.find('.en').text(en);
				row.find('.zh').text(ch);
				tab.append(row);

			}

		}

		function codes() {
			var array = [ 'a', 'b', 'c', 'd', 'e' ];
			return array;
		}
	</script>

</body>
</html>